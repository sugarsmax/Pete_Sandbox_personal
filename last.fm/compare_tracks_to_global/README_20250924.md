# Last.fm Personal vs Global Track Ranking Comparison

*This project was built by Claude Sonnet 4 AI assistant*

## ğŸµ Overview

This project provides a comprehensive system for comparing personal Last.fm listening habits against global popularity rankings for any artist. Using Playwright MCP for automated data collection and advanced statistical analysis, it reveals insights into your unique musical taste profile.

## ğŸ¯ What It Does

- **Scrapes Last.fm data**: Automatically extracts both your personal track rankings and global popularity data
- **Statistical analysis**: Performs sophisticated correlation analysis using multiple algorithms
- **Interactive visualizations**: Creates beautiful, interactive HTML charts and tables
- **Detailed reporting**: Generates comprehensive analysis reports with insights about your taste profile

## ğŸ“ Project Structure

```
compare_tracks_to_global/
â”œâ”€â”€ README_20250924.md                           # This documentation
â”œâ”€â”€ lastfm_comparison_plan_20250924.md          # Initial project plan
â”œâ”€â”€ lastfm_complete_system_20250924.py          # ğŸš€ Main system (run this!)
â”œâ”€â”€ lastfm_scraper_20250924.py                  # Core scraping framework
â”œâ”€â”€ playwright_lastfm_scraper_20250924.py       # Playwright MCP integration
â”œâ”€â”€ comparison_algorithms_20250924.py           # Statistical analysis algorithms
â”œâ”€â”€ html_visualizations_20250924.py             # HTML visualization system
â”œâ”€â”€ demo_comparison_analysis_20250924.py        # Demo with sample data
â”œâ”€â”€ complete_personal_ranking.py                # Personal ranking analysis
â”œâ”€â”€ simple_markdown_output.py                   # Markdown output utility
â”œâ”€â”€ simple_lastfm_scraper.ipynb                 # Jupyter notebook scraper
â”œâ”€â”€ dynamic_lastfm_notebook.ipynb               # Dynamic analysis notebook
â”œâ”€â”€ lastfm_artist_comparison_notebook.ipynb     # Artist comparison notebook
â”œâ”€â”€ compare_tracks_to_global.ipynb              # Main analysis notebook
â”‚
â”œâ”€â”€ ğŸ“ Artist Comparison Data (by artist):
â”œâ”€â”€ queens_of_the_stone_age/                    # QOTSA comparisons & visualizations
â”œâ”€â”€ stone_temple_pilots/                        # STP comparisons & visualizations  
â”œâ”€â”€ van_halen/                                  # Van Halen comparisons
â”‚
â”œâ”€â”€ ğŸ“ Analysis Folders (raw scraped data):
â”œâ”€â”€ qotsa_analysis/                             # QOTSA comparison raw data
â”œâ”€â”€ stp_analysis/                               # STP comparison raw data
â”œâ”€â”€ the_cult_analysis/                          # The Cult comparison raw data
â”œâ”€â”€ death_from_above_1979_analysis/             # Death From Above 1979 comparison data
â”‚
â”œâ”€â”€ visualizations/                             # Generated HTML visualizations
â””â”€â”€ *.md                                        # Markdown outputs and rankings
```

**Folder Organization:**
- **Artist comparison folders** (e.g., `queens_of_the_stone_age/`, `stone_temple_pilots/`): Contains cleaned analysis results, HTML visualizations, and mermaid diagrams
- **Analysis folders** (e.g., `qotsa_analysis/`, `stp_analysis/`): Raw scraped data and comparison analysis results

## ğŸš€ Quick Start

### Run the Complete Analysis

```bash
python lastfm_complete_system_20250924.py --username YOUR_USERNAME --artist "ARTIST_NAME"
```

**Example:**
```bash
python lastfm_complete_system_20250924.py --username sugarsmax --artist "Stone Temple Pilots"
```

### Command Line Options

- `--username` / `-u`: Your Last.fm username (required)
- `--artist` / `-a`: Artist name to analyze (required)  
- `--quiet` / `-q`: Run in quiet mode with minimal output

## ğŸ“Š What You Get

### 1. **Interactive Scatter Plot**
- Visual comparison of personal vs global rankings
- Hover tooltips with detailed track information
- Color-coded by "loved" status
- Diagonal reference line for perfect correlation

### 2. **Comprehensive Data Table**
- Sortable table with all matched tracks
- Rank differences highlighted with color coding
- Statistics cards with key metrics
- Detailed analysis insights section

### 3. **Statistical Analysis**
- **Spearman Correlation**: Measures ranking similarity
- **Kendall's Tau**: Agreement in pairwise preferences  
- **Top-N Overlap**: Overlap in top tracks (3, 5, 10)
- **Rank-Biased Overlap**: Top-weighted similarity metric
- **Weighted Correlation**: Emphasizes your top-ranked tracks
- **Percentile Analysis**: Categorizes taste preferences

### 4. **JSON Data Export**
- Complete raw data and analysis results
- Metadata and processing information
- Ready for further analysis or visualization

## ğŸ”¬ Analysis Methods

### Correlation Analysis
- **Spearman Rank Correlation**: Measures monotonic relationship (-1 to +1)
- **Kendall's Tau**: Robust measure of ordinal association
- **Weighted Correlation**: Gives more importance to your top tracks

### Positional Analysis  
- **Rank Difference Mapping**: Shows personal_rank - global_rank
- **Percentile Conversion**: Normalizes for fair comparison
- **Top-N Agreement**: Compares overlap in top tracks

### Advanced Metrics
- **Rank-Biased Overlap (RBO)**: Top-heavy similarity measure
- **Quintile Grouping**: Categories tracks by preference level

## ğŸ“ˆ Sample Analysis Results

Based on Stone Temple Pilots analysis for user `sugarsmax`:

```
ğŸ¯ YOUR TASTE PROFILE: ALTERNATIVE TASTE - You prefer some deep cuts over popular hits

ğŸ“Š KEY METRICS:
â€¢ Matched Tracks: 6 out of 10 personal tracks
â€¢ Loved Track Rate: 100% (all matches are loved!)
â€¢ Deep Cuts Preferred: 4 tracks ranked higher personally
â€¢ Average Rank Difference: -4.5 (negative = you prefer deeper cuts)

ğŸ–ï¸ MOST DISTINCTIVE PREFERENCES:
â€¢ Biggest deep cut: 'Sin' (Personal #4 vs Global #20)
â€¢ Most mainstream aligned: 'Plush' (Personal #8 vs Global #1)
```

## ğŸ¨ Visualization Features

### Interactive Elements
- **Hover tooltips** with detailed track information
- **Responsive design** that works on all devices
- **Color-coded visualizations** using Autodesk color palette
- **Smooth animations** and transitions

### Design System
- Uses professional color palette from user rules
- Dark theme with glassmorphism effects
- Typography optimized for readability
- Mobile-responsive layout

## ğŸ› ï¸ Technical Implementation

### Data Collection (Playwright MCP)
- Automated browser navigation to Last.fm pages
- JavaScript evaluation for data extraction
- Handles pagination and dynamic content loading
- Robust error handling and retry logic

### Data Processing
- Track name normalization (removes remasters, etc.)
- Fuzzy matching between personal and global data
- Comprehensive data validation and cleanup

### Statistical Engine
- Multiple correlation algorithms implemented from scratch
- Handles edge cases and insufficient data gracefully
- Provides interpretations for all metrics

## ğŸ“ Understanding Your Results

### Taste Profiles

- **ğŸ¸ DEEP LISTENER**: Strong preference for tracks less mainstream (avg diff < -5)
- **ğŸµ ALTERNATIVE TASTE**: Moderate preference for deep cuts (avg diff -5 to -2)  
- **âš–ï¸ BALANCED LISTENER**: Mix of mainstream and personal favorites (avg diff -2 to +2)
- **ğŸ“» MAINSTREAM ALIGNED**: Taste matches popular opinion (avg diff +2 to +5)
- **ğŸ† POPULAR FOCUSED**: Strong preference for mainstream hits (avg diff > +5)

### Correlation Interpretations

- **Very Strong**: |correlation| > 0.8 - Your taste closely matches/opposes global trends
- **Strong**: |correlation| > 0.6 - Significant similarity/opposition  
- **Moderate**: |correlation| > 0.4 - Some correlation present
- **Weak**: |correlation| > 0.2 - Minimal correlation
- **Very Weak**: |correlation| â‰¤ 0.2 - No meaningful correlation

## ğŸ”§ Extending the System

### Adding New Analysis Methods
1. Create new method in `RankingComparator` class
2. Add to `comprehensive_analysis()` method
3. Include interpretation logic

### Custom Visualizations
1. Extend `HTMLVisualizer` class  
2. Use provided color palette and styling
3. Follow responsive design patterns

### Integration with Live Playwright MCP
1. Replace demo data in `scrape_personal_tracks()` and `scrape_global_tracks()`
2. Use actual Playwright MCP function calls
3. Handle pagination and error cases

## ğŸ“Š Data Sources

- **Personal Rankings**: `https://www.last.fm/user/{username}/library/music/{artist}/+tracks`
- **Global Rankings**: `https://www.last.fm/music/{artist}/+tracks`

## ğŸ¯ Use Cases

- **Music Discovery**: Find which of your favorites are hidden gems
- **Taste Analysis**: Understand your musical preferences quantitatively  
- **Artist Deep Dives**: Compare your relationship with different artists
- **Social Sharing**: Share unique insights about your musical taste
- **A/B Testing**: Compare taste evolution over time

## ğŸš€ Future Enhancements

- **Live Playwright Integration**: Real-time scraping for any user/artist
- **Multi-Artist Analysis**: Compare taste across multiple artists simultaneously
- **Temporal Analysis**: Track changes in preferences over time
- **Social Features**: Compare taste with friends or communities
- **Genre Analysis**: Extend to genre-level comparisons
- **Playlist Generation**: Create playlists based on taste insights

---

## ğŸµ Example Output

When you run the system, you'll get:

1. **Console Output**: Real-time progress and summary statistics
2. **Interactive HTML Files**: Beautiful visualizations you can share
3. **JSON Data**: Complete analysis results for further processing  
4. **Detailed Report**: Human-readable insights about your musical taste

Open the generated HTML files in your browser to explore the interactive visualizations!

---

*Built with â¤ï¸ using Python, statistical analysis, and modern web technologies*

**Model Used**: Claude Sonnet 4 AI Assistant  
**Created**: September 24, 2025  
**License**: MIT  

---

## ğŸ“ Support

This system demonstrates the power of combining:
- ğŸ­ Playwright MCP for web automation
- ğŸ“Š Advanced statistical analysis  
- ğŸ¨ Interactive data visualization
- ğŸ¤– AI-assisted development

Perfect for music enthusiasts, data analysts, and anyone curious about their unique musical taste! ğŸ¶
